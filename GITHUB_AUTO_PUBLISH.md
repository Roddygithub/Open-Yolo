# üì§ Publication Automatique GitHub - Guide Complet

Guide pour publier automatiquement la release v1.0.0 sur GitHub sans intervention manuelle.

---

## üéØ Vue d'Ensemble

La publication automatique utilise l'API GitHub pour :
1. ‚úÖ Cr√©er la release
2. ‚úÖ Uploader tous les artefacts (DEB, RPM, TGZ, PKGBUILD)
3. ‚úÖ Ajouter les captures d'√©cran
4. ‚úÖ D√©finir comme "latest release"
5. ‚úÖ Publier instantan√©ment

---

## üîë Configuration du Token GitHub

### Option 1 : Token Personnel (Recommand√©)

1. **Cr√©er un token :**
   - Aller sur : https://github.com/settings/tokens/new
   - **Note :** `Open-Yolo Release Automation`
   - **Expiration :** 90 jours (ou personnalis√©)
   - **Permissions :** Cocher `repo` (toutes les sous-permissions)
   - Cliquer sur "Generate token"
   - **Copier le token** (il ne sera affich√© qu'une fois !)

2. **Exporter le token :**
   ```bash
   export GITHUB_TOKEN=ghp_votre_token_ici
   ```

3. **Rendre permanent (optionnel) :**
   ```bash
   # Ajouter √† ~/.bashrc ou ~/.zshrc
   echo 'export GITHUB_TOKEN=ghp_votre_token_ici' >> ~/.bashrc
   source ~/.bashrc
   ```

### Option 2 : GitHub CLI (Alternative)

```bash
# Installer GitHub CLI
# Ubuntu/Debian
sudo apt install gh

# Fedora
sudo dnf install gh

# Arch
sudo pacman -S github-cli

# Authentification
gh auth login

# Le token sera automatiquement configur√©
```

---

## üöÄ Utilisation

### M√©thode 1 : Publication Automatique Compl√®te

```bash
# 1. Configurer le token
export GITHUB_TOKEN=ghp_votre_token

# 2. Ex√©cuter l'automatisation compl√®te
chmod +x scripts/auto-release.sh
./scripts/auto-release.sh

# Le script va demander confirmation avant de publier
# R√©pondre 'Y' pour publier automatiquement
```

**Dur√©e :** ~20-25 minutes (incluant la publication)

### M√©thode 2 : Publication S√©par√©e

```bash
# 1. Pr√©parer la release (sans publier)
./scripts/auto-release.sh
# R√©pondre 'N' quand demand√©

# 2. Publier manuellement plus tard
export GITHUB_TOKEN=ghp_votre_token
chmod +x scripts/publish-github-release.sh
./scripts/publish-github-release.sh
```

### M√©thode 3 : Publication Uniquement

Si tout est d√©j√† pr√™t (tag, paquets, etc.) :

```bash
export GITHUB_TOKEN=ghp_votre_token
./scripts/publish-github-release.sh
```

---

## üìã Ce qui est Publi√© Automatiquement

### Informations de la Release

- **Tag :** `v1.0.0`
- **Titre :** `Open-Yolo v1.0.0 ‚Äì Premi√®re version stable pour Linux`
- **Description :** Contenu complet de `GITHUB_RELEASE_v1.0.0.md`
- **Statut :** Latest release (non-draft, non-prerelease)

### Artefacts Upload√©s

#### Paquets (depuis `packages/`)
- `open-yolo_1.0.0_amd64.deb` (~2 MB)
- `open-yolo-1.0.0-1.x86_64.rpm` (~2 MB)
- `open-yolo-1.0.0-Linux.tar.gz` (~3 MB)

#### Documentation
- `CHANGELOG.md` - Historique complet
- `PKGBUILD` - Pour Arch Linux

#### Captures d'√âcran (depuis `docs/screenshots/`)
- `main-window.png`
- `effects-tab.png`
- `shortcuts-tab.png`
- `cursor-active.png`
- Toutes les autres captures disponibles

---

## üîç V√©rifications Automatiques

Le script effectue les v√©rifications suivantes :

### Avant Publication

1. ‚úÖ **Token GitHub** valide et avec les bonnes permissions
2. ‚úÖ **Acc√®s au d√©p√¥t** confirm√©
3. ‚úÖ **Tag v1.0.0** existe (cr√©√© si n√©cessaire)
4. ‚úÖ **Artefacts** pr√©sents dans `packages/`
5. ‚úÖ **Description** disponible (`GITHUB_RELEASE_v1.0.0.md`)

### Pendant Publication

1. ‚úÖ **Suppression** de l'ancienne release si existante
2. ‚úÖ **Cr√©ation** de la nouvelle release
3. ‚úÖ **Upload** de chaque artefact avec v√©rification
4. ‚úÖ **Confirmation** de chaque upload

### Apr√®s Publication

1. ‚úÖ **V√©rification** que la release est visible
2. ‚úÖ **Comptage** des artefacts upload√©s
3. ‚úÖ **Affichage** de l'URL de la release

---

## üìä R√©sultat Attendu

### Console Output

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                       ‚ïë
‚ïë     üì§ PUBLICATION GITHUB AUTOMATIQUE üì§             ‚ïë
‚ïë                                                       ‚ïë
‚ïë         Open-Yolo v1.0.0 Release                      ‚ïë
‚ïë                                                       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
  √âTAPE 1/8 : V√©rification du Token GitHub
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úì Token GitHub trouv√©
‚úì Acc√®s au d√©p√¥t confirm√©

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
  √âTAPE 2/8 : V√©rification du Tag v1.0.0
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úì Tag v1.0.0 existe localement
‚úì Tag pouss√© vers GitHub

[... autres √©tapes ...]

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
  √âTAPE 7/8 : Upload des Artefacts
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚Ñπ Upload de open-yolo_1.0.0_amd64.deb...
‚úì open-yolo_1.0.0_amd64.deb upload√© (ID: 123456)
‚Ñπ Upload de open-yolo-1.0.0-1.x86_64.rpm...
‚úì open-yolo-1.0.0-1.x86_64.rpm upload√© (ID: 123457)
[...]

========================================
  ‚úÖ Publication R√©ussie !
========================================

üìä R√©sum√© de la Release :

  Tag : v1.0.0
  Titre : Open-Yolo v1.0.0 ‚Äì Premi√®re version stable pour Linux
  Artefacts : 8 fichiers
  URL : https://github.com/Roddygithub/Open-Yolo/releases/tag/v1.0.0

üì¶ Artefacts Inclus :
  - open-yolo_1.0.0_amd64.deb (2MB)
  - open-yolo-1.0.0-1.x86_64.rpm (2MB)
  - open-yolo-1.0.0-Linux.tar.gz (3MB)
  - CHANGELOG.md (0MB)
  - PKGBUILD (0MB)
  - main-window.png (0MB)
  - effects-tab.png (0MB)
  - shortcuts-tab.png (0MB)

üîó Liens :
  Release : https://github.com/Roddygithub/Open-Yolo/releases/tag/v1.0.0
  T√©l√©chargements : https://github.com/Roddygithub/Open-Yolo/releases/download/v1.0.0/

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
  üéâ Release v1.0.0 Publi√©e ! üéâ
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```

### Sur GitHub

La release sera visible sur :
```
https://github.com/Roddygithub/Open-Yolo/releases/tag/v1.0.0
```

Avec :
- ‚úÖ Badge "Latest"
- ‚úÖ Description compl√®te format√©e
- ‚úÖ Tous les artefacts t√©l√©chargeables
- ‚úÖ Captures d'√©cran visibles
- ‚úÖ Statistiques de t√©l√©chargement

---

## üêõ D√©pannage

### Erreur : "GITHUB_TOKEN non d√©fini"

```bash
# V√©rifier si le token est d√©fini
echo $GITHUB_TOKEN

# Si vide, l'exporter
export GITHUB_TOKEN=ghp_votre_token
```

### Erreur : "Impossible d'acc√©der au d√©p√¥t"

**Causes possibles :**
1. Token invalide ou expir√©
2. Permissions insuffisantes
3. Nom de d√©p√¥t incorrect

**Solution :**
```bash
# V√©rifier le token
curl -H "Authorization: token $GITHUB_TOKEN" \
  https://api.github.com/user

# V√©rifier les permissions
curl -H "Authorization: token $GITHUB_TOKEN" \
  https://api.github.com/repos/Roddygithub/Open-Yolo
```

### Erreur : "√âchec d'upload d'artefact"

**Causes possibles :**
1. Fichier trop volumineux (> 2GB)
2. Connexion interrompue
3. Nom de fichier invalide

**Solution :**
```bash
# R√©essayer l'upload
./scripts/publish-github-release.sh

# Ou uploader manuellement un fichier sp√©cifique
UPLOAD_URL="..." # R√©cup√©r√© du script
curl -X POST \
  -H "Authorization: token $GITHUB_TOKEN" \
  -H "Content-Type: application/octet-stream" \
  --data-binary @packages/fichier.deb \
  "$UPLOAD_URL?name=fichier.deb"
```

### Erreur : "Release d√©j√† existante"

Le script supprime automatiquement l'ancienne release.
Si l'erreur persiste :

```bash
# Supprimer manuellement
gh release delete v1.0.0 --yes

# Ou via l'interface GitHub
# https://github.com/Roddygithub/Open-Yolo/releases
```

### Erreur : "jq: command not found"

```bash
# Ubuntu/Debian
sudo apt install jq

# Fedora
sudo dnf install jq

# Arch
sudo pacman -S jq
```

---

## üîí S√©curit√©

### Bonnes Pratiques

1. **Ne jamais commiter le token** dans Git
2. **Utiliser des tokens avec expiration**
3. **Permissions minimales** (seulement `repo`)
4. **R√©voquer** les tokens inutilis√©s
5. **Variables d'environnement** plut√¥t que fichiers

### R√©vocation du Token

Si le token est compromis :

1. Aller sur : https://github.com/settings/tokens
2. Trouver le token "Open-Yolo Release Automation"
3. Cliquer sur "Delete"
4. Cr√©er un nouveau token

---

## üìà M√©triques de Succ√®s

### Indicateurs de R√©ussite

- ‚úÖ Release visible sur GitHub
- ‚úÖ Badge "Latest" affich√©
- ‚úÖ Tous les artefacts t√©l√©chargeables
- ‚úÖ Description compl√®te affich√©e
- ‚úÖ Captures d'√©cran visibles
- ‚úÖ Statistiques de t√©l√©chargement actives

### V√©rification Post-Publication

```bash
# V√©rifier la release
curl -s https://api.github.com/repos/Roddygithub/Open-Yolo/releases/tags/v1.0.0 | jq .

# Compter les t√©l√©chargements
curl -s https://api.github.com/repos/Roddygithub/Open-Yolo/releases/tags/v1.0.0 \
  | jq '.assets[] | {name: .name, downloads: .download_count}'
```

---

## üéØ Workflow Complet

### Sc√©nario Id√©al : Tout Automatique

```bash
# 1. Configuration (une fois)
export GITHUB_TOKEN=ghp_votre_token
echo 'export GITHUB_TOKEN=ghp_votre_token' >> ~/.bashrc

# 2. Installation des d√©pendances (une fois)
pip install Pillow
sudo apt install jq curl

# 3. Automatisation compl√®te
./scripts/auto-release.sh

# R√©pondre 'Y' quand demand√© pour la publication

# 4. V√©rifier la release
# https://github.com/Roddygithub/Open-Yolo/releases/tag/v1.0.0
```

**Dur√©e totale :** ~25 minutes  
**Intervention manuelle :** Aucune (apr√®s configuration)

---

## üìû Support

### En Cas de Probl√®me

1. **V√©rifier les logs** du script
2. **Consulter** ce guide
3. **Tester** avec GitHub CLI : `gh release create`
4. **Ouvrir une issue** sur GitHub

### Ressources

- **API GitHub** : https://docs.github.com/en/rest/releases
- **GitHub CLI** : https://cli.github.com/
- **Tokens** : https://github.com/settings/tokens

---

## üéä R√©sum√©

La publication automatique permet de :

‚úÖ **Gagner du temps** : ~15 minutes √©conomis√©es  
‚úÖ **√âviter les erreurs** : Pas d'oubli d'artefact  
‚úÖ **√ätre reproductible** : M√™me processus √† chaque fois  
‚úÖ **√ätre tra√ßable** : Logs complets de chaque √©tape  

**Une seule commande pour tout publier !**

```bash
export GITHUB_TOKEN=ghp_votre_token
./scripts/auto-release.sh
```

---

*Document cr√©√© le 30 septembre 2025*
